import{_ as S,B as f,r as o,o as u,c,F as d,a as l,b as g,w as n,d as t,e as i,f as k,t as b}from"./index.e9530005.js";const C={data:()=>({subscriptions:[],form_submitted:!1,valid:!0,email:"",emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"]}),methods:{submit(){fetch(f+"getSubscriptionsByEmail?"+new URLSearchParams({email:this.email}),{method:"GET"}).then(e=>e.json()).then(e=>{this.subscriptions=e,this.form_submitted=!0,this.$refs.form.reset()}).catch(()=>{})},getDescription(e){switch(e){case 1:return"Unleaded Petrol (U91)";case 2:return"Premium Unleaded (U95)";case 4:return"Diesel";case 5:return"LPG";case 6:return"98 RON (U98)";case 10:return"E85";case 11:return"Brand diesel"}},deleteSubscription(e,r){fetch(f+"deleteSubscription?"+new URLSearchParams({id:e}),{method:"DELETE"}).then(h=>h.json()).then(()=>{this.form_submitted=!1,this.subscriptions.splice(r,1)}).catch(()=>{})},home(){this.$router.push("/")}}},y=t("h2",null,[t("strong",null,"Unsubscribe from daily emails")],-1),B=t("br",null,null,-1),R=t("br",null,null,-1),w=t("br",null,null,-1),D=t("br",null,null,-1),L=t("br",null,null,-1),N=t("br",null,null,-1),P=t("br",null,null,-1),F=t("br",null,null,-1),T=t("br",null,null,-1);function $(e,r,h,j,q,a){const p=o("v-alert"),m=o("v-btn"),_=o("v-text-field"),v=o("v-card-actions"),E=o("v-card"),U=o("v-form");return u(),c(d,null,[y,B,e.form_submitted&&e.subscriptions.length===0?(u(),c(d,{key:0},[l(p,{text:"No subscriptions found",color:"error"}),R,w],64)):g("",!0),l(m,{color:"success",onClick:a.home},{default:n(()=>[i("Home page")]),_:1},8,["onClick"]),D,L,l(U,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":r[1]||(r[1]=s=>e.valid=s),"lazy-validation":""},{default:n(()=>[l(_,{modelValue:e.email,"onUpdate:modelValue":r[0]||(r[0]=s=>e.email=s),rules:e.emailRules,label:"E-mail",hint:"Provide the email used for creating the subscription","persistent-hint":"",required:""},null,8,["modelValue","rules"]),N,l(m,{color:"success",class:"mr-4",onClick:a.submit,disabled:!e.valid},{default:n(()=>[i(" Unsubscribe ")]),_:1},8,["onClick","disabled"]),P,F,(u(!0),c(d,null,k(e.subscriptions,(s,V)=>(u(),c(d,{key:s},[t("p",null,[t("strong",null,"Subscription details for "+b(s.email),1)]),l(E,null,{default:n(()=>[l(_,null,{default:n(()=>[i("Suburb: "+b(s.suburb),1)]),_:2},1024),l(_,null,{default:n(()=>[i("Fuel type: "+b(a.getDescription(s.product)),1)]),_:2},1024),l(v,null,{default:n(()=>[l(m,{color:"error",variant:"flat",onClick:G=>a.deleteSubscription(s.id,V)},{default:n(()=>[i("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),T],64))),128))]),_:1},8,["modelValue"])],64)}const A=S(C,[["render",$]]);export{A as default};
